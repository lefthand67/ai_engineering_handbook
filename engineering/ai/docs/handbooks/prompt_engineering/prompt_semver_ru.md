# Политика версионирования промптов с использованием семантического версионирования (SemVer)

---

Владелец: Вадим Рудаков, lefthand67@gmail.com  
Версия: 0.1.0  
Дата создания: 06.10.2025  
Дата изменения: 18.10.2025  

---

См. [Semantic Versioning 2.0.0](https://semver.org/)

## Формат версии:
`<МAJOR>.<MINOR>.<PATCH>`

Пример названия файла с промптом:  
`summarizer_1.0.0`

## 1. Компоненты версии и когда повышать

| Сегмент версии | Значение                                | Когда повышать                                                | Пример                                       |
|----------------|---------------------------------------|--------------------------------------------------------------|----------------------------------------------|
| **MAJOR**      | Ломающие, несовместимые изменения    | Изменение структуры промпта, плейсхолдеров или формата вывода, требующее изменений в коде или данных | `1.0.0` → `2.0.0`, если формат промпта изменился  |
| **MINOR**      | Новые функции, совместимые с предыдущими | Добавление опциональных параметров, дополнительных контекстов или улучшений без ломки совместимости | `1.0.0` → `1.1.0`, если добавлено новое необязательное поле |
| **PATCH**      | Исправления ошибок, опечаток, настройка параметров | Небольшие исправления без изменений формата промпта или вывода | `1.1.0` → `1.1.1` исправление опечатки или настройка температуры |

## 2. Требования к метаданным

Каждый файл с версией промпта **ДОЛЖЕН** содержать метаданные для отслеживания:

```json
{
  "id": "название_промпта",
  "version": "X.Y.Z",
  "description": "Краткое описание назначения или изменений в промпте",
  "author": "Имя автора или команды",
  "created_at": "Дата и время в формате ISO8601",
  "last_modified": "Дата и время в формате ISO8601",
  "template": "Текст промпта с плейсхолдерами",
  "parameters": { /* конфигурация параметров */ }
}
```

# 3. Документация изменений

- Каждое повышение версии **ДОЛЖНО** сопровождаться записью в журнале изменений, в которой указывается:  
  - Что изменилось (структура, новые функции, исправления)  
  - Почему было изменено (мотивация)  
  - Как это влияет на downstream-системы или вывод  

Пример записи в changelog:

```
1.1.0 - Добавлен опциональный параметр «тон» для контроля стиля. Совместимо с предыдущими версиями.
2.0.0 - Обновлены плейсхолдеры для поддержки нескольких входных данных. Требуется обновление кода.
```

# 4. Выпуск и деплой

- Никогда не редактируйте версию с существующим ID, всегда создавайте новую версию.  
- В продакшен должны попадать только полностью протестированные версии промптов.  
- История версий ведётся в Git или системе управления промптами и требует обязательного код-ревью.

# 5. Автоматизация и валидация

- Используйте схемы JSON или Pydantic-модели для валидации структуры файлов с промптами.
- Интегрируйте проверки версионирования в CI/CD, чтобы предотвращать ошибочные изменения.
- Запускайте автоматические тесты (юнит- и интеграционные) для проверки корректности каждой версии промпта.

# 6. Откат и аудит

- Должна быть возможность быстро откатиться на любую стабильную версию при возникновении проблем.  
- Регулярно проводите аудит изменений, особенно перед повышением major-версии.
